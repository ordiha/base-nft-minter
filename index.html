<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base NFT Minter</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
</head>
<body>
    <h1>Base NFT Minter</h1>
    <p>Mint an NFT for 0.00000001 ETH!</p>
    <img src="images/nft-minter-image.jpg" alt="NFT Minter Image" style="width: 300px; height: auto;">
    <button onclick="mintNFT()">Mint NFT</button>
    <p id="result"></p>

    <script>
        async function mintNFT() {
            if (typeof window.ethereum !== 'undefined') {
                const result = document.getElementById("result");
                result.innerText = "Connecting to MetaMask/Rabby...";

                try {
                    // Request account access and set network
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const web3 = new Web3(window.ethereum);

                    // Specify the network (e.g., Base Mainnet Chain ID 8453 or Sepolia 84531)
                    const chainId = '0x2105'; // Hex for Base Mainnet (8453), use '0x2105' for Sepolia if deployed there
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: chainId }],
                    }).catch(() => console.log("Switch to Base network manually if needed"));

                    // Contract details
                    const contractAddress = 'YOUR_CONTRACT_ADDRESS'; // Replace with your address
                    const abi = [
                        {
                            "inputs": [],
                            "name": "mintNFT",
                            "outputs": [],
                            "stateMutability": "payable",
                            "type": "function"
                        }
                    ];

                    const contract = new web3.eth.Contract(abi, contractAddress);

                    // Send transaction
                    const tx = await contract.methods.mintNFT().send({
                        from: accounts[0],
                        value: web3.utils.toWei('0.00000001', 'ether')
                    });
                    result.innerText = `NFT Minted! Transaction Hash: ${tx.transactionHash}`;
                } catch (error) {
                    result.innerText = `Error: ${error.message}`;
                }
            } else {
                result.innerText = "Please install MetaMask or Rabby!";
            }
        }
    </script>
</body>
</html>
